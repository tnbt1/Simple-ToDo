# Todo App

Next.js、TypeScript、PostgreSQLで構築されたタスク管理アプリケーションです。

## このアプリケーションでできること

### タスク管理機能
- タスクの作成、編集、削除
- 優先度設定（高・中・低）
- 期限設定と期限切れアラート
- ステータス管理（未着手・進行中・完了）
- カテゴリー別の分類
- リアルタイム検索とフィルタリング

### コラボレーション機能
- タスクの共有URL生成
- カテゴリー単位での一括共有
- 共有タスクへのコメント機能（スレッド）
- スレッド内での画像投稿
- リアルタイム更新（Server-Sent Events使用）

### その他の機能
- ユーザー認証（メールアドレス・パスワード）
- プロフィール管理
- ダークモード対応
- モバイル対応レスポンシブデザイン
- ドラッグ&ドロップでの画像アップロード

## 必要な環境

- Docker
- Docker Compose
- Git

## インストールと起動

### 1. リポジトリのクローン

```bash
git clone https://github.com/tnbt1/Simple-ToDo.git
cd Simple-ToDo
```

### 2. アプリケーションの起動

```bash
./scripts/quick-start.sh
```

このコマンドで以下が自動的に実行されます：
- 環境設定ファイルの作成
- セキュアなキーの生成
- Dockerコンテナの起動
- データベースのセットアップ
- アプリケーションの起動

### 3. アクセス

ブラウザで以下のURLにアクセスしてください：
```
http://localhost:3100
```

## 使い方

### 初回ログイン

テスト用アカウントが自動的に作成されています：
- メールアドレス: test@example.com
- パスワード: test123

新規アカウントを作成する場合は、サインアップページから登録してください。

### タスクの作成

1. ログイン後、「+ 新しいタスクを追加」ボタンをクリック
2. タスク名を入力（必須）
3. 必要に応じて以下を設定：
   - 説明文
   - 優先度（高・中・低）
   - 期限
   - カテゴリー
4. 「作成」ボタンをクリック

### タスクの管理

- **ステータス変更**: タスク詳細画面でステータスを選択
- **編集**: タスク詳細画面で編集アイコンをクリック
- **削除**: タスク一覧でゴミ箱アイコンをクリック
- **完了**: チェックボックスをクリック

### タスクの共有

1. タスク一覧で共有アイコンをクリック
2. 生成されたURLをコピー
3. 共有したい相手にURLを送信

共有されたタスクは読み取り専用で表示され、スレッドでコメントのやり取りができます。

### カテゴリー共有

1. カテゴリー名の横にある共有アイコンをクリック
2. 共有URLをコピー
3. 相手がURLにアクセスすると、そのカテゴリーの全タスクがインポートされます

### スレッド機能

1. タスク詳細画面またはタスク一覧のメッセージアイコンをクリック
2. メッセージを入力して送信
3. 画像を添付する場合は画像アイコンをクリック、またはドラッグ&ドロップ

## 便利なコマンド

```bash
# サービスの起動
make up

# サービスの停止
make down

# ログの確認
make logs

# 再起動
make restart

# ヘルスチェック
make health

# データベースのリセット
make reset-db
```

## トラブルシューティング

### ポート3100が使用中の場合

```bash
# 使用中のプロセスを確認
lsof -i :3100

# 別のポートを使用する場合は docker-compose.yml を編集
# ports:
#   - "3200:3000"  # 3200に変更
```

### ログインできない場合

1. ブラウザのキャッシュとCookieをクリア
2. 以下のコマンドでアプリケーションを再起動：
```bash
docker compose down
docker compose up -d
```

### データベース接続エラー

```bash
# データベースをリセット
make reset-db
```

## 技術スタック

- **フロントエンド**: Next.js 15.3.3, TypeScript, Tailwind CSS
- **バックエンド**: Next.js API Routes, Prisma ORM
- **データベース**: PostgreSQL 15
- **キャッシュ**: Redis 7
- **認証**: NextAuth.js
- **コンテナ**: Docker, Docker Compose

## ライセンス

MIT License